# solace-logging-config

This is a collection of logging configuration files for use with Solace messaging routers.  Currently includes:

- rsyslog
- syslog-ng
- logstash grok (ELK / ElasticSearch)
 
_These are very much WIP, and meant to give a Solace administrator a head-start on configuration._

The logstash grok rules are still really rough, but the rsyslog and syslog-ng rules are fairly complete.
They do basically the same thing:

- Listen on 3 different inbound TCP ports, one for dev, test, and prod (e.g. 51400, 51401, 51402 respectively)
  - This way I could add additional rules/processing later on depending on what port it is
  - This assumes a particular Solace router is designated as prod, test, or dev.  Maybe change to prod/non-prod?
- Ability to process all 3 log facilities arriving from Solace, but does some filtering.  For each router, it creates a directory
for it prefixed by `router_`.  Then inside each:
  - `system.log`: this is essentially left alone, but I think this log is dumb as it's a subset of `event.log`
  - `command.log`: all the commands, but filtering out all the 'show' commands 
(which can be exported to command via the CLI command `en --> con --> logging command all mode all`.
Very useful for watching SEMP monitoring polling rate.
  - `show.log`: all of the show commands get put into a separate file to not junk up the `command.log`
  - `event.log`: all of the router's event logs, minus a couple AUTH logs that are constantly generated by SEMP monitoring apps
  - `auth.log`: the events corresponding to CLI/SEMP logins/lougouts
  - With syslog-ng, I can parse out the VPN name on VPN and CLIENT events, and this allows me to create per-VPN directories
  (prefixed with `vpn_`), and keep an event log only for that VPN.  This is very useful if other VPNs on the same appliance
  are very noisy and cause the main event log to roll quickly.
- Then I monitor the event logs for events of interest that are duplicated to a general `alerts.log` file.  This file would ideally 
be watched by a monitoring program, rather than having the monitoring program trying to watch every router's complete event log.

I've also included an example logrotate configuration file, and a crontab entry to check every 2 minutes if the logs need rotating.

